eliasfgabriel.com {
	redir https://www.eliasfgabriel.com{uri}
}

www.eliasfgabriel.com {
    header {
        Permissions-Policy "interest-cohort=()"
        Referrer-Policy no-referrer
        Strict-Transport-Security "max-age=63072000; includeSubDomains; preload"
        Content-Security-Policy "default-src 'none'; style-src 'self'; img-src 'self'; frame-ancestors 'none'; base-uri 'none'; form-action 'none'"
        X-Frame-Options DENY
        X-Content-Type-Options nosniff
        X-XSS-Protection "1; mode=block"
    }
    header /images/* Cache-Control "private; max-age=31557600; immutable"

    root * /etc/caddy/www-eliasfgabriel-com/public
    file_server

    encode gzip

    handle_errors {
        @404 {
            expression {http.error.status_code} == 404
        }
        handle @404 {
            rewrite * /404.html
            file_server
        }
    }
}